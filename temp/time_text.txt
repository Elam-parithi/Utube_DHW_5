
import re
import os
import streamlit as st
from datetime import datetime

def json_2_file(self, data, filename):
    """
    Saves data to a JSON file.
    """
    try:
        with open(filename, 'w') as file:
            json.dump(data, file, indent=4)
        print(f"Data saved to {filename}.")
    except Exception as e:
        print(f"Error saving data to file: {e}")


def file_2_json(filename):
    """
    Loads data from a JSON file.
    """
    try:
        with open(filename, 'r') as file:
            data = json.load(file)
        return data
    except Exception as e:
        print(f"Error loading data from file: {e}")
        return {}


def convert_iso_to_mysql_datetime(iso_datetime_str):
    date_obj = datetime.strptime(iso_datetime_str, '%Y-%m-%dT%H:%M:%SZ')
    mysql_datetime_str = date_obj.strftime('%Y-%m-%d %H:%M:%S')
    return mysql_datetime_str


def convert_iso_duration_to_seconds(iso_duration_str):
    pattern = re.compile(r'PT(?:(\d+)H)?(?:(\d+)M)?(?:(\d+)S)?')
    match = pattern.match(iso_duration_str)
    if not match:
        raise ValueError("Invalid ISO 8601 duration format")
    hours = int(match.group(1)) if match.group(1) else 0
    minutes = int(match.group(2)) if match.group(2) else 0
    seconds = int(match.group(3)) if match.group(3) else 0
    total_seconds = hours * 3600 + minutes * 60 + seconds
    return total_seconds